# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ OAuth –¥–ª—è GitHub Pages

## –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Google –Ω–∞ GitHub Pages –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ª–æ–≥–∏–Ω–∞, –∏ —Å–µ—Å—Å–∏—è –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è.

## –ü—Ä–∏—á–∏–Ω—ã

1. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π Redirect URL** - Supabase –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ URL, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º –≤ Google OAuth –∏ Supabase
2. **PKCE Flow** —Ç—Ä–µ–±—É–µ—Ç —Ç–æ—á–Ω–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è redirect URL
3. **localStorage** –º–æ–∂–µ—Ç –Ω–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–µ–∫–æ—Ç–æ—Ä—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏

## –†–µ—à–µ–Ω–∏–µ

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Redirect URLs –≤ Supabase

–í –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ Supabase –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Authentication > URL Configuration** –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ Redirect URLs:

#### –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
```
http://localhost:5173/finance-tracker/login
```

#### –î–ª—è GitHub Pages:
```
https://vanya-id.github.io/finance-tracker/login
```

‚ö†Ô∏è **–í–ê–ñ–ù–û**: URL –¥–æ–ª–∂–µ–Ω —Ç–æ—á–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å —Ç–µ–º, —á—Ç–æ –≤—ã –≤–∏–¥–∏—Ç–µ –≤ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ –±—Ä–∞—É–∑–µ—Ä–∞!

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Google OAuth

–í [Google Cloud Console](https://console.cloud.google.com/) –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **APIs & Services > Credentials** –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ **Authorized JavaScript origins** —É –≤–∞—Å –µ—Å—Ç—å:

```
http://localhost:5173
https://vanya-id.github.io
```

–ò –≤ **Authorized redirect URIs**:

```
https://gksabgzqysblvkiwmico.supabase.co/auth/v1/callback
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Site URL –≤ Supabase

–í Supabase **Authentication > URL Configuration** —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ **Site URL**:

#### –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–≤—Ä–µ–º–µ–Ω–Ω–æ):
```
http://localhost:5173/finance-tracker/
```

#### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ (GitHub Pages):
```
https://vanya-id.github.io/finance-tracker/
```

‚ö†Ô∏è **–í–ù–ò–ú–ê–ù–ò–ï**: Site URL –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –æ–∫—Ä—É–∂–µ–Ω–∏–µ–º, –∫–æ—Ç–æ—Ä–æ–µ –≤—ã —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç–µ!

### 4. –ß—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–æ –≤ –∫–æ–¥–µ

1. **`src/services/supabase.ts`**:
   - –î–æ–±–∞–≤–ª–µ–Ω —É–Ω–∏–∫–∞–ª—å–Ω—ã–π `storageKey` –¥–ª—è localStorage
   - –í–∫–ª—é—á–µ–Ω–∞ –æ—Ç–ª–∞–¥–∫–∞ (`debug: true`) –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

2. **`src/services/supabaseAuthService.ts`**:
   - –£–ª—É—á—à–µ–Ω–æ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ redirect URL
   - –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

3. **`src/hooks/useAuth.ts`**:
   - –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ PKCE code
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏–∑ URL
   - –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —à–∞–≥–æ–≤ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

4. **`src/pages/LoginPage.tsx`**:
   - –£–¥–∞–ª–µ–Ω–∞ –¥—É–±–ª–∏—Ä—É—é—â–∞—è –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ OAuth —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞
   - –í—Å—è –ª–æ–≥–∏–∫–∞ —Ç–µ–ø–µ—Ä—å –≤ `useAuth` —Ö—É–∫–µ

### 5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### –õ–æ–∫–∞–ª—å–Ω–æ:

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ dev —Å–µ—Ä–≤–µ—Ä: `npm run dev`
2. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä: `http://localhost:5173/finance-tracker/`
3. –ù–∞–∂–º–∏—Ç–µ "–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google"
4. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ `/plan`

#### –ù–∞ GitHub Pages:

1. –°–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç: `npm run build`
2. –ó–∞–¥–µ–ø–ª–æ–π—Ç–µ –Ω–∞ GitHub Pages: `npm run deploy`
3. –û—Ç–∫—Ä–æ–π—Ç–µ: `https://vanya-id.github.io/finance-tracker/`
4. –ù–∞–∂–º–∏—Ç–µ "–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google"
5. –ü–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ `/plan`

### 6. –û—Ç–ª–∞–¥–∫–∞

–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:

- `üîç [useAuth] –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏...` - –Ω–∞—á–∞–ª–æ –ø—Ä–æ–≤–µ—Ä–∫–∏
- `‚úÖ [useAuth] –ù–∞–π–¥–µ–Ω OAuth code` - –∫–æ–¥ –ø–æ–ª—É—á–µ–Ω
- `‚úÖ [useAuth] –°–µ—Å—Å–∏—è —É—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω–∞!` - —Å–µ—Å—Å–∏—è —Å–æ–∑–¥–∞–Ω–∞
- `üë§ [useAuth] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: email@example.com` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω

–ï—Å–ª–∏ –≤—ã –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫–∏, –æ–Ω–∏ –ø–æ–º–æ–≥—É—Ç –ø–æ–Ω—è—Ç—å, –Ω–∞ –∫–∞–∫–æ–º —ç—Ç–∞–ø–µ –≤–æ–∑–Ω–∏–∫–ª–∞ –ø—Ä–æ–±–ª–µ–º–∞.

### 7. –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

#### "–û—à–∏–±–∫–∞ –æ–±–º–µ–Ω–∞ –∫–æ–¥–∞"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Client ID –∏ Client Secret –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –≤ Supabase
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Redirect URL —Ç–æ—á–Ω–æ —Å–æ–≤–ø–∞–¥–∞–µ—Ç

#### "–°–µ—Å—Å–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –ø–æ—Å–ª–µ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞"
- –û—á–∏—Å—Ç–∏—Ç–µ localStorage –≤ –±—Ä–∞—É–∑–µ—Ä–µ (F12 > Application > Local Storage > Clear All)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ cookies –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä–æ–º
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Site URL –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤ Supabase

#### "–†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ /login –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ localStorage –µ—Å—Ç—å –∫–ª—é—á `finance-tracker-auth`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ - —Ç–∞–º –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–º, —á—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫

### 8. –ü—Ä–æ–≤–µ—Ä–∫–∞ localStorage

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞:

```javascript
// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –µ—Å—Ç—å –ª–∏ —Å–µ—Å—Å–∏—è –≤ localStorage
console.log(localStorage.getItem('finance-tracker-auth'))
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å JSON –æ–±—ä–µ–∫—Ç —Å `access_token`, `refresh_token` –∏ –¥—Ä—É–≥–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏.

## –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–ª–æ

1. –£–¥–∞–ª–∏—Ç–µ OAuth –∫–ª–∏–µ–Ω—Ç –≤ Google Cloud Console –∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π
2. –û–±–Ω–æ–≤–∏—Ç–µ Client ID –∏ Client Secret –≤ Supabase
3. –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞ –∏ localStorage
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤ —Ä–µ–∂–∏–º–µ –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø–æ–º–æ—â—å

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ CORS –≤ Supabase
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–æ–µ–∫—Ç Supabase –Ω–µ –Ω–∞ –ø–∞—É–∑–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–≤–æ—Ç—ã Google OAuth

